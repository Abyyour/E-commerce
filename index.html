    <!DOCTYPE html>
    <html lang="en">

    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Alibaba Inspired E-commerce with Centered Product Detail Modal</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Bootstrap Icons CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

    <style>
        body {
        font-family: 'Arial', sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
        color: #333;
        padding-top: 70px; /* Sticky navbar height */
        }

        /* Sticky Navbar */
        .navbar-alibaba {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1040;
        background-color: white;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        padding: 0.5rem 1rem;
        }

        .navbar-alibaba .container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: nowrap;
        }

        .navbar-alibaba .logo {
        font-weight: 700;
        color: #ff6a00;
        font-size: 1.8rem;
        letter-spacing: 2px;
        user-select: none;
        cursor: pointer;
        flex-shrink: 0;
        }

        .navbar-alibaba .search-bar {
        flex-grow: 1;
        max-width: 600px;
        position: relative;
        }

        .navbar-alibaba .search-bar input[type="search"] {
        width: 100%;
        padding: 0.5rem 3rem 0.5rem 1rem;
        border-radius: 25px;
        border: 1.8px solid #ced4da;
        font-size: 1rem;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .navbar-alibaba .search-bar input[type="search"]:focus {
        outline: none;
        border-color: #ff6a00;
        box-shadow: 0 0 8px rgba(255, 106, 0, 0.5);
        }

        .navbar-alibaba .search-bar button {
        position: absolute;
        top: 50%;
        right: 0.35rem;
        transform: translateY(-50%);
        border: none;
        background-color: #ff6a00;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        color: white;
        font-size: 1.1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background-color 0.3s ease;
        }

        .navbar-alibaba .search-bar button:hover {
        background-color: #cc5500;
        }

        .navbar-alibaba .nav-icons {
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-shrink: 0;
        font-size: 1.3rem;
        color: #333;
        }

        .navbar-alibaba .nav-icons .icon-btn {
        position: relative;
        cursor: pointer;
        transition: color 0.3s ease;
        background: none;
        border: none;
        padding: 0;
        color: #333;
        }

        .navbar-alibaba .nav-icons .icon-btn:hover {
        color: #ff6a00;
        }

        .navbar-alibaba .nav-icons .badge {
        position: absolute;
        top: -6px;
        right: -10px;
        font-size: 0.65rem;
        font-weight: 700;
        padding: 2px 6px;
        border-radius: 12px;
        background-color: #dc3545;
        color: white;
        }

        @media (max-width: 767.98px) {
        .navbar-alibaba .search-bar {
            max-width: 100%;
        }

        .navbar-alibaba .logo {
            font-size: 1.4rem;
        }
        }

        @media (max-width: 400px) {
        .navbar-alibaba .search-bar {
            display: none;
        }
        }

        main {
        max-width: 1280px;
        margin: auto;
        padding: 1rem 15px 3rem;
        }

        /* Carousel */
        .carousel-item img {
        height: 350px;
        object-fit: cover;
        border-radius: 10px;
        user-select: none;
        }

        @media (max-width: 768px) {
        .carousel-item img {
            height: 200px;
        }
        }

        /* Category Tiles */
        .category-section {
        margin-top: 3rem;
        margin-bottom: 3rem;
        user-select: none;
        }

        .category-title {
        font-size: 1.9rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        color: #ff6a00;
        text-align: center;
        }

        .category-tiles {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        }

        .category-tile {
        background: white;
        width: calc(20% - 1rem);
        min-width: 130px;
        aspect-ratio: 1/1;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        text-align: center;
        padding: 1.5rem 1rem;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: #ff6a00;
        font-weight: 600;
        font-size: 1rem;
        }

        .category-tile:hover {
        background-color: #ff6a00;
        color: white;
        transform: translateY(-8px);
        box-shadow: 0 8px 20px rgba(255, 106, 0, 0.35);
        }

        .category-tile i {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        }

        @media (max-width: 992px) {
        .category-tile {
            width: calc(25% - 1rem);
        }
        }

        @media (max-width: 576px) {
        .category-tile {
            width: calc(50% - 1rem);
        }
        }

        /* Featured Deals */
        .featured-deals {
        background: white;
        border-radius: 15px;
        padding: 1.5rem 2rem;
        margin-bottom: 4rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
        user-select: none;
        }

        .featured-header {
        font-weight: 700;
        font-size: 1.8rem;
        color: #dc3545;
        margin-bottom: 1.5rem;
        }

        .deal-cards .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 6px 15px rgba(220, 53, 69, 0.2);
        transition: transform 0.3s ease;
        cursor: pointer;
        background-color: #fff4f5;
        user-select: none;
        display: flex;
        flex-direction: column;
        height: 100%;
        }

        .deal-cards .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 12px 28px rgba(220, 53, 69, 0.45);
        }

        .deal-cards img {
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        max-height: 160px;
        object-fit: cover;
        width: 100%;
        user-select: none;
        }

        .deal-cards .card-body {
        padding: 1rem 1.25rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        }

        .deal-title {
        font-weight: 700;
        color: #dc3545;
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
        user-select: text;
        }

        .deal-price {
        color: #dc3545;
        font-weight: 600;
        font-size: 1.1rem;
        user-select: text;
        }

        /* Product Cards Grid */
        .product-grid {
        margin-bottom: 4rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1.5rem;
        user-select: none;
        }

        .product-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        height: 100%;
        }

        .product-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }

        .product-image {
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        overflow: hidden;
        height: 180px;
        background-color: #fbfbfb;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        }

        .product-image img {
        max-height: 100%;
        max-width: 100%;
        object-fit: contain;
        user-select: none;
        }

        .product-info {
        padding: 1rem 1.25rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        user-select: text;
        }

        .product-title {
        font-weight: 600;
        margin: 0 0 0.5rem 0;
        font-size: 1.1rem;
        color: #333;
        height: 2.5rem;
        overflow: hidden;
        user-select: text;
        }

        .product-price {
        font-weight: 700;
        color: #28a745;
        font-size: 1.15rem;
        margin-bottom: 0.75rem;
        user-select: text;
        }

        .btn-add-cart {
        border-radius: 25px;
        font-weight: 600;
        padding: 0.5rem 1.5rem;
        background-color: #28a745;
        border: none;
        color: white;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        user-select: none;
        align-self: start;
        }

        .btn-add-cart:hover {
        background-color: #218838;
        box-shadow: 0 4px 20px rgba(40, 167, 69, 0.5);
        }

        /* Offcanvas Cart */
        #offcanvasCart .offcanvas-header {
        border-bottom: 1px solid #dee2e6;
        }

        #offcanvasCart .offcanvas-body {
        padding: 1rem;
        display: flex;
        flex-direction: column;
        height: 100%;
        }

        #cart-items-table {
        flex-grow: 1;
        overflow-y: auto;
        }

        #offcanvasCart .btn-order-now {
        border-radius: 25px;
        font-weight: 600;
        background-color: #ff6a00;
        border: none;
        color: white;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        user-select: none;
        }

        #offcanvasCart .btn-order-now:hover {
        background-color: #cc5500;
        box-shadow: 0 6px 18px rgba(204, 85, 0, 0.5);
        }

        /* Product Detail Modal */
        #productDetailModal .modal-body {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        user-select: none;
        }

        #productDetailModal .main-img {
        width: 100%;
        max-height: 300px;
        object-fit: contain;
        border-radius: 12px;
        background-color: #f9f9f9;
        }

        #productDetailModal .thumbnail-list {
        display: flex;
        gap: 10px;
        overflow-x: auto;
        }

        #productDetailModal .thumbnail-list img {
        width: 60px;
        height: 60px;
        object-fit: contain;
        cursor: pointer;
        border-radius: 8px;
        border: 2px solid transparent;
        transition: border-color 0.3s ease;
        user-select: none;
        }

        #productDetailModal .thumbnail-list img.active {
        border-color: #28a745;
        }

        #productDetailModal .product-title {
        font-weight: 700;
        font-size: 1.4rem;
        }

        #productDetailModal .product-price {
        color: #28a745;
        font-weight: 700;
        font-size: 1.2rem;
        }

        #productDetailModal .product-description {
        font-size: 1rem;
        line-height: 1.5;
        color: #555;
        }
    </style>
    </head>

    <body>
    <!-- Sticky Navbar -->
    <nav class="navbar-alibaba">
        <div class="container">
        <div class="logo" id="nav-logo">ShopEase</div>
        <form class="search-bar" role="search" id="search-form" onsubmit="event.preventDefault(); performSearch();">
            <input type="search" id="search-input" placeholder="Search products..." autocomplete="off"
            aria-label="Search products" />
            <button type="submit" aria-label="Search">
            <i class="bi bi-search"></i>
            </button>
        </form>
        <div class="nav-icons" aria-label="User navigation icons">
            <button class="icon-btn" id="login-btn" title="Login / Profile" aria-label="Login or Profile">
            <i class="bi bi-person"></i>
            </button>
            <button class="icon-btn position-relative" id="notification-btn" title="Notifications" aria-label="Notifications">
            <i class="bi bi-bell"></i>
            <span class="badge" id="notification-count" style="display:none;">0</span>
            </button>
            <button class="icon-btn position-relative" id="cart-btn" title="Cart" aria-label="Shopping Cart" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
            <i class="bi bi-cart"></i>
            <span class="badge bg-success" id="cart-count">0</span>
            </button>
        </div>
        </div>
    </nav>

    <main>
        <!-- Promotional Carousel -->
        <div id="promoCarousel" class="carousel slide mb-5" data-bs-ride="carousel" aria-label="Promotional carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="0" class="active" aria-current="true"
            aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner rounded-3 shadow-sm">
            <div class="carousel-item active">
            <img src="https://images.unsplash.com/photo-1503602642458-232111445657?auto=format&amp;fit=crop&amp;w=1280&amp;q=80"
                class="d-block w-100" alt="Spring Sale Banner" />
            </div>
            <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1470412800960-bd2580ca6650?auto=format&amp;fit=crop&amp;w=1280&amp;q=80"
                class="d-block w-100" alt="New Arrivals Banner" />
            </div>
            <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&amp;fit=crop&amp;w=1280&amp;q=80"
                class="d-block w-100" alt="Limited Time Offer Banner" />
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#promoCarousel" data-bs-slide="prev"
            aria-label="Previous slide">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#promoCarousel" data-bs-slide="next"
            aria-label="Next slide">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
        </div>

        <!-- Product Categories -->
        <section aria-label="Product categories" class="category-section">
        <h2 class="category-title">Shop by Category</h2>
        <div class="category-tiles" role="list">
            <div role="button" tabindex="0"
            class="category-tile d-flex flex-column align-items-center justify-content-center" aria-label="Electronics category">
            <i class="bi bi-phone-vibrate-fill"></i>
            Electronics
            </div>
            <div role="button" tabindex="0"
            class="category-tile d-flex flex-column align-items-center justify-content-center" aria-label="Fashion category">
            <i class="bi bi-bag-heart"></i>
            Fashion
            </div>
            <div role="button" tabindex="0"
            class="category-tile d-flex flex-column align-items-center justify-content-center" aria-label="Home and Garden category">
            <i class="bi bi-house-heart"></i>
            Home & Garden
            </div>
            <div role="button" tabindex="0"
            class="category-tile d-flex flex-column align-items-center justify-content-center" aria-label="Beauty and Health category">
            <i class="bi bi-heart-pulse-fill"></i>
            Beauty & Health
            </div>
            <div role="button" tabindex="0"
            class="category-tile d-flex flex-column align-items-center justify-content-center" aria-label="Sports category">
            <i class="bi bi-bicycle"></i>
            Sports
            </div>
        </div>
        </section>

        <!-- Featured Deals -->
        <section aria-label="Featured deals" class="featured-deals">
        <h2 class="featured-header">Featured Deals</h2>
        <div class="deal-cards row g-4">
            <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card deal-card" tabindex="0" role="button" aria-label="Smartwatch featured deal, $149.99">
                <img src="https://images.unsplash.com/photo-1517059224940-d4af9eec41e6?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Smartwatch" />
                <div class="card-body">
                <h5 class="deal-title">Smartwatch Series 5</h5>
                <p class="deal-price">$149.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Smartwatch Series 5 to cart">Add to Cart</button>
                </div>
            </div>
            </div>
            <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card deal-card" tabindex="0" role="button" aria-label="Wireless Headphones featured deal, $79.99">
                <img src="https://images.unsplash.com/photo-1518449232321-38be9befc470?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Wireless Headphones" />
                <div class="card-body">
                <h5 class="deal-title">Wireless Headphones</h5>
                <p class="deal-price">$79.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Wireless Headphones to cart">Add to Cart</button>
                </div>
            </div>
            </div>
            <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card deal-card" tabindex="0" role="button" aria-label="Portable Speaker featured deal, $34.99">
                <img src="https://images.unsplash.com/photo-1517014769271-e57263380811?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Portable Bluetooth Speaker" />
                <div class="card-body">
                <h5 class="deal-title">Portable Speaker</h5>
                <p class="deal-price">$34.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Portable Speaker to cart">Add to Cart</button>
                </div>
            </div>
            </div>
            <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card deal-card" tabindex="0" role="button" aria-label="Gaming Mouse featured deal, $49.99">
                <img src="https://images.unsplash.com/photo-1589578527966-3e6926313b37?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Gaming Mouse" />
                <div class="card-body">
                <h5 class="deal-title">Gaming Mouse</h5>
                <p class="deal-price">$49.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Gaming Mouse to cart">Add to Cart</button>
                </div>
            </div>
            </div>
        </div>
        </section>

        <!-- Product Grid -->
        <section aria-label="Product grid">
        <h2 class="category-title">Latest Products</h2>
        <div class="product-grid" role="list">

            <div class="product-card" role="listitem" tabindex="0" aria-label="Wireless Headphones, $89.99">
            <div class="product-image">
                <img src="https://images.unsplash.com/photo-1518449232321-38be9befc470?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Wireless Headphones" />
            </div>
            <div class="product-info">
                <h3 class="product-title">Wireless Headphones</h3>
                <p class="product-price">$89.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Wireless Headphones to cart">Add to Cart</button>
            </div>
            </div>

            <div class="product-card" role="listitem" tabindex="0" aria-label="Smartwatch, $129.99">
            <div class="product-image">
                <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Smartwatch" />
            </div>
            <div class="product-info">
                <h3 class="product-title">Smartwatch</h3>
                <p class="product-price">$129.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Smartwatch to cart">Add to Cart</button>
            </div>
            </div>

            <div class="product-card" role="listitem" tabindex="0" aria-label="Gaming Mouse, $59.99">
            <div class="product-image">
                <img src="https://images.unsplash.com/photo-1589578527966-3e6926313b37?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Gaming Mouse" />
            </div>
            <div class="product-info">
                <h3 class="product-title">Gaming Mouse</h3>
                <p class="product-price">$59.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Gaming Mouse to cart">Add to Cart</button>
            </div>
            </div>

            <div class="product-card" role="listitem" tabindex="0" aria-label="Bluetooth Speaker, $39.99">
            <div class="product-image">
                <img src="https://images.unsplash.com/photo-1517014769271-e57263380811?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Bluetooth Speaker" />
            </div>
            <div class="product-info">
                <h3 class="product-title">Bluetooth Speaker</h3>
                <p class="product-price">$39.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Bluetooth Speaker to cart">Add to Cart</button>
            </div>
            </div>

            <div class="product-card" role="listitem" tabindex="0" aria-label="Laptop Backpack, $79.99">
            <div class="product-image">
                <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?auto=format&amp;fit=crop&amp;w=600&amp;q=80"
                alt="Laptop Backpack" />
            </div>
            <div class="product-info">
                <h3 class="product-title">Laptop Backpack</h3>
                <p class="product-price">$79.99</p>
                <button class="btn-add-cart btn btn-success" aria-label="Add Laptop Backpack to cart">Add to Cart</button>
            </div>
            </div>

        </div>
        </section>
    </main>

    <!-- Offcanvas Cart Sidebar -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart" aria-labelledby="offcanvasCartLabel">
        <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasCartLabel">Your Shopping Cart</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body d-flex flex-column" style="min-height: 300px;">
        <div id="cart-items-table" class="mb-3" style="overflow-y: auto; flex-grow: 1;">
            <!-- Cart content table rendered here -->
        </div>
        <div class="d-flex justify-content-between align-items-center mt-3">
            <h5>Total:</h5>
            <h4 class="text-success" id="cart-total-amount">$0.00</h4>
        </div>
        <button id="orderNowBtn" class="btn-order-now mt-3 w-100" aria-label="Proceed to order">Order Now</button>
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <form id="orderForm" novalidate>
            <div class="modal-header">
                <h5 class="modal-title" id="orderModalLabel">Place Your Order</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <div class="mb-3">
                <label for="customerName" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="customerName" required />
                <div class="invalid-feedback">Please enter your full name.</div>
                </div>

                <div class="mb-3">
                <label for="customerEmail" class="form-label">Email Address</label>
                <input type="email" class="form-control" id="customerEmail" required />
                <div class="invalid-feedback">Please enter a valid email address.</div>
                </div>

                <div class="mb-3">
                <label for="customerAddress" class="form-label">Shipping Address</label>
                <textarea class="form-control" id="customerAddress" rows="3" required></textarea>
                <div class="invalid-feedback">Please enter your shipping address.</div>
                </div>

                <div class="mb-3">
                <label for="paymentMethod" class="form-label">Payment Method</label>
                <select class="form-select" id="paymentMethod" required>
                    <option value="" selected disabled>Select payment method</option>
                    <option value="Credit Card">Credit Card</option>
                    <option value="PayPal">PayPal</option>
                    <option value="Bank Transfer">Bank Transfer</option>
                </select>
                <div class="invalid-feedback">Please select a payment method.</div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-success">Confirm Order</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            </div>
            </form>
        </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div class="modal fade" id="productDetailModal" tabindex="-1" aria-labelledby="productDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title product-title" id="productDetailModalLabel">Product Title</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            <img src="" alt="Main product image" class="main-img mb-3" id="product-main-img" />
            <div class="thumbnail-list mb-3" id="product-thumbnails">
                <!-- Thumbnail images go here -->
            </div>
            <p class="product-price text-success fs-4 fw-bold" id="product-price">$0.00</p>
            <p class="product-description" id="product-description"></p>
            <button class="btn btn-success btn-add-cart" id="detailAddToCartBtn">Add to Cart</button>
            </div>
        </div>
        </div>
    </div>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const cart = [];

        function getProductInfoFromCard(card) {
        const titleElem = card.querySelector('.product-title, .deal-title');
        const priceElem = card.querySelector('.product-price, .deal-price');
        const imgElem = card.querySelector('img');
        if (!titleElem || !priceElem || !imgElem) {
            return null;
        }
        return {
            title: titleElem.textContent.trim(),
            price: parseFloat(priceElem.textContent.replace(/[^0-9.-]+/g, '')) || 0,
            imgSrc: imgElem.src,
            description: card.querySelector('.product-description') ? card.querySelector('.product-description').textContent : '',
            images: card.dataset.images ? JSON.parse(card.dataset.images) : [imgElem.src]
        };
        }

        function addProductToCart(product) {
        const existingItem = cart.find(item => item.title === product.title);
        if (existingItem) {
            existingItem.quantity++;
        } else {
            product.quantity = 1;
            cart.push(product);
        }
        updateCartCount();
        renderCart();
        }

        function calculateCartTotal() {
        return cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        }

        function updateCartCount() {
        const cartCountBadge = document.getElementById('cart-count');
        if (!cartCountBadge) return;
        const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCountBadge.textContent = totalQty;
        cartCountBadge.style.display = totalQty > 0 ? 'inline-block' : 'none';
        }

        function renderCart() {
        const tableContainer = document.getElementById('cart-items-table');
        const totalAmountElem = document.getElementById('cart-total-amount');
        if (!tableContainer || !totalAmountElem) return;

        if (cart.length === 0) {
            tableContainer.innerHTML = '<p class="text-muted text-center mt-3">Your cart is empty.</p>';
            totalAmountElem.textContent = '$0.00';
            return;
        }

        let html = `
            <table class="table table-sm">
            <thead>
                <tr>
                <th>Item</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Subtotal</th>
                <th></th>
                </tr>
            </thead>
            <tbody>
        `;

        cart.forEach((item, index) => {
            const subtotal = item.price * item.quantity;
            html += `
            <tr data-index="${index}">
                <td class="d-flex align-items-center gap-2">
                <img src="${item.imgSrc}" alt="${item.title}" style="width:40px; height:40px; object-fit:contain; border-radius:5px;" />
                <span>${item.title}</span>
                </td>
                <td>$${item.price.toFixed(2)}</td>
                <td><input type="number" min="1" value="${item.quantity}" class="form-control form-control-sm cart-qty-input" style="width:55px;" aria-label="Quantity for ${item.title}"></td>
                <td>$${subtotal.toFixed(2)}</td>
                <td><button type="button" class="btn btn-sm btn-danger btn-remove-item" aria-label="Remove ${item.title}">&times;</button></td>
            </tr>
            `;
        });

        html += `</tbody></table>`;
        tableContainer.innerHTML = html;
        totalAmountElem.textContent = `$${calculateCartTotal().toFixed(2)}`;

        tableContainer.querySelectorAll('.cart-qty-input').forEach(input => {
            input.addEventListener('change', e => {
            const newVal = parseInt(e.target.value);
            if (isNaN(newVal) || newVal < 1) e.target.value = 1;
            const tr = e.target.closest('tr');
            const idx = parseInt(tr.getAttribute('data-index'), 10);
            cart[idx].quantity = e.target.value;
            updateCartCount();
            renderCart();
            });
        });

        tableContainer.querySelectorAll('.btn-remove-item').forEach(btn => {
            btn.addEventListener('click', e => {
            const tr = e.target.closest('tr');
            const idx = parseInt(tr.getAttribute('data-index'), 10);
            cart.splice(idx, 1);
            updateCartCount();
            renderCart();
            });
        });
        }

        function setupAddToCartButtonsAndDetails() {
        document.querySelectorAll('.btn-add-cart').forEach(btn => {
            btn.addEventListener('click', e => {
            e.preventDefault();
            e.stopPropagation();
            const card = btn.closest('.product-card, .card');
            if (!card) return;
            const product = getProductInfoFromCard(card);
            if (!product) {
                alert('Error adding product to cart');
                return;
            }
            addProductToCart(product);
            alert(`Added "${product.title}" to cart!`);
            });
        });

        document.querySelectorAll('.product-card, .deal-card').forEach(card => {
            card.addEventListener('click', () => {
            const product = getProductInfoFromCard(card);
            if (!product) return;
            showProductDetailModal(product);
            });
        });
        }

        function showProductDetailModal(product) {
        const modal = new bootstrap.Modal(document.getElementById('productDetailModal'));
        const modalEl = document.getElementById('productDetailModal');

        modalEl.querySelector('.product-title').textContent = product.title;
        modalEl.querySelector('#product-price').textContent = `$${product.price.toFixed(2)}`;
        modalEl.querySelector('#product-description').textContent = product.description || "";
        const mainImg = modalEl.querySelector('#product-main-img');
        mainImg.src = product.images && product.images.length ? product.images[0] : product.imgSrc;
        mainImg.alt = product.title;

        const thumbnailsContainer = modalEl.querySelector('#product-thumbnails');
        thumbnailsContainer.innerHTML = "";
        let imgs = (product.images && product.images.length) ? product.images : [product.imgSrc];
        imgs.forEach((src, i) => {
            const img = document.createElement('img');
            img.src = src;
            img.alt = `${product.title} Image ${i + 1}`;
            if (i === 0) img.classList.add('active');
            img.style.userSelect = "none";
            img.addEventListener('click', e => {
            mainImg.src = e.target.src;
            thumbnailsContainer.querySelectorAll('img').forEach(tn => tn.classList.remove('active'));
            e.target.classList.add('active');
            });
            thumbnailsContainer.appendChild(img);
        });

        const addBtn = modalEl.querySelector('#detailAddToCartBtn');
        addBtn.onclick = () => {
            addProductToCart(product);
            alert(`Added "${product.title}" to cart!`);
            modal.hide();
        };

        modal.show();
        }

        // Order modal form validation
        function validateForm(form) {
        if (!form.checkValidity()) {
            form.classList.add('was-validated');
            return false;
        }
        return true;
        }

        document.getElementById('orderForm').addEventListener('submit', e => {
        e.preventDefault();
        const form = e.target;
        if (!validateForm(form)) return;

        alert('Thank you for your order! We will process it shortly.');

        cart.length = 0;
        updateCartCount();
        renderCart();

        form.reset();
        form.classList.remove('was-validated');
        bootstrap.Modal.getInstance(document.getElementById('orderModal')).hide();

        // Hide offcanvas cart if open
        const offcanvasEl = document.getElementById('offcanvasCart');
        const offcanvasInstance = bootstrap.Offcanvas.getInstance(offcanvasEl);
        if (offcanvasInstance) offcanvasInstance.hide();
        });

        // Search demo
        document.getElementById('search-form').addEventListener('submit', e => {
        e.preventDefault();
        const query = document.getElementById('search-input').value.trim();
        if (!query) {
            alert('Please enter a search term.');
            return;
        }
        alert(`Searching for "${query}" (demo only).`);
        document.getElementById('search-input').value = '';
        });

        // Placeholder login and notifications
        document.getElementById('login-btn').addEventListener('click', () => alert('Login/Profile clicked.'));
        document.getElementById('notification-btn').addEventListener('click', () => alert('Notifications clicked.'));

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
        setupAddToCartButtonsAndDetails();
        renderCart();

        const notificationCount = document.getElementById('notification-count');
        notificationCount.textContent = '2';
        notificationCount.style.display = 'inline-block';
        });
    </script>
    </body>

    </html>
    \end{code}
